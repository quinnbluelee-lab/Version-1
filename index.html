<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大學伴靈魂屬性測驗 - 沉浸式情境測驗</title>
    <style>
        :root {
            /* 根據圖4-9搭配的主題色 */
            --bg-gradient: linear-gradient(135deg, #FFF2C3 0%, #FFDAB9 50%, #ECB2BA 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --primary-orange: #FDA26C;
            --soft-pink: #ECB2BA;
            --soft-yellow: #FFF2C3;
            --accent-blue: #9ABDD3;
            --accent-purple: #9FA2BC;
            --text-color: #5D5D5D;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, Arial, "PingFang TC", "Microsoft JhengHei", sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #main-container {
            background: var(--card-bg);
            width: 90%;
            max-width: 650px;
            padding: 40px;
            border-radius: 40px;
            border: 4px solid white;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        /* 裝飾性外框插圖感 */
        #main-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 10px;
            background: repeating-linear-gradient(90deg, var(--soft-pink), var(--soft-pink) 20px, var(--soft-yellow) 20px, var(--soft-yellow) 40px);
        }

        .progress-container {
            width: 100%;
            height: 12px;
            background: #EEE;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background: var(--primary-orange);
            border-radius: 10px;
            transition: width 0.4s ease;
        }

        .header h1 {
            font-size: 1.8rem;
            color: #D35400;
            text-align: center;
            margin-bottom: 10px;
        }

        .header p { text-align: center; line-height: 1.6; }

        .question-box { display: none; animation: fadeIn 0.5s ease; }
        .question-box.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .question-tag {
            display: inline-block;
            background: var(--soft-yellow);
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            color: #E67E22;
            margin-bottom: 15px;
        }

        .question-text { font-size: 1.2rem; font-weight: bold; margin-bottom: 25px; }

        .options-list { display: flex; flex-direction: column; gap: 12px; }

        .option-btn {
            background: white;
            border: 2px solid #EEE;
            padding: 18px;
            border-radius: 20px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: 0.2s;
        }

        .option-btn:hover {
            border-color: var(--primary-orange);
            background: #FFF9F5;
            transform: scale(1.02);
        }

        /* 結果頁面特有視覺 */
        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .trait-card {
            background: #FDFDFD;
            padding: 15px;
            border-radius: 20px;
            border: 1px solid #F0F0F0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.02);
        }

        .trait-name { font-size: 0.9rem; margin-bottom: 8px; font-weight: bold; }
        
        .trait-bar-bg { width: 100%; height: 8px; background: #EEE; border-radius: 5px; overflow: hidden; }
        .trait-bar-fill { height: 100%; background: var(--accent-purple); width: 0%; transition: width 1s ease; }

        .character-img {
            width: 120px;
            height: auto;
            display: block;
            margin: 0 auto 15px;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--primary-orange);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 10px;
        }

        .result-desc {
            background: #FFF;
            padding: 20px;
            border-radius: 20px;
            border: 2px dashed var(--soft-pink);
            line-height: 1.7;
        }

        .btn-restart {
            width: 100%;
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 25px;
        }
    </style>
</head>
<body>

<div id="main-container">
    <div id="start-screen">
        <div class="header">
            <h1>【大學伴靈魂屬性測驗】</h1>
            <p>沉浸式情境測驗：如果是你，會怎麼做？<br>依照你的直覺，讓我們找出你的學伴靈魂屬性！</p>
        </div>
        <button class="btn-restart" onclick="startQuiz()">開始挑戰 ✏️</button>
    </div>

    <div id="quiz-content" style="display:none;">
        <div class="progress-container"><div id="progress-bar"></div></div>
        <div id="question-area"></div>
    </div>

    <div id="result-container" style="display:none;">
        <div class="score-circle" id="final-percent">0%</div>
        <div id="character-visual"></div>
        <div class="header"><h1 id="role-name">角色名稱</h1></div>
        
        <div class="result-grid">
            <div class="trait-card">
                <div class="trait-name">教學同理心</div>
                <div class="trait-bar-bg"><div id="bar1" class="trait-bar-fill"></div></div>
                <div id="txt1" style="font-size: 0.8rem; margin-top:5px; text-align:right;">0%</div>
            </div>
            <div class="trait-card">
                <div class="trait-name">行動與責任感</div>
                <div class="trait-bar-bg"><div id="bar2" class="trait-bar-fill"></div></div>
                <div id="txt2" style="font-size: 0.8rem; margin-top:5px; text-align:right;">0%</div>
            </div>
            <div class="trait-card">
                <div class="trait-name">自我覺察學習</div>
                <div class="trait-bar-bg"><div id="bar3" class="trait-bar-fill"></div></div>
                <div id="txt3" style="font-size: 0.8rem; margin-top:5px; text-align:right;">0%</div>
            </div>
            <div class="trait-card">
                <div class="trait-name">整體價值認同</div>
                <div class="trait-bar-bg"><div id="bar4" class="trait-bar-fill"></div></div>
                <div id="txt4" style="font-size: 0.8rem; margin-top:5px; text-align:right;">0%</div>
            </div>
        </div>

        <div class="result-desc" id="final-desc"></div>
        <button class="btn-restart" onclick="location.reload()">重新測驗</button>
    </div>
</div>

<script>
    // 角色圖片與資料 (請將此處圖片位址換成您的實際連結或 Base64)
    const characters = {
        gold: { name: "【金級領航員】", desc: "你具備無可挑剔的特質！你的同理心與自律簡直是學伴界的模範。孩子遇到你，就像抽到了大獎，請一定要把這份光芒帶進計畫裡！非常適合擔任大學伴。", img: "role_1.png" },
        warm: { name: "【暖心守護者】", desc: "你具備非常穩定的陪伴能力。你很溫暖且負責任，是孩子最需要的心理支柱。只要保持這份初心，你將會與孩子一起創造一段美好的回憶。適合擔任大學伴。", img: "role_2.png" },
        potential: { name: "【潛力實習生】", desc: "你已經具備了學伴的雛形！雖然在應變或自律上還有點挑戰，但只要你願意開放心胸、多方學習，你也能成為一名出色的引路人。具備潛力。", img: "role_3.png" },
        tourist: { name: "【自由觀光客】", desc: "目前你的生活節奏與價值觀似乎與學伴計畫的「高承諾」有所落差。建議再多了解計畫內容，確認自己是否真的準備好承擔這份責任喔！建議再思考。", img: "role_4.png" }
    };

    const questions = [
        { tag: "1. 【換位思考】", q: "孩子今天一直分心，甚至對你愛理不理，這已經是連續第二週了。你的第一反應是？", options: [{t:"停下課本，溫和地說：「我看你今天好像很累，是不是發生什麼事讓你沒精神？」", s:4},{t:"先簡單關心，如果孩子不想說，就稍微縮減內容，改聊他感興趣的話題。", s:3},{t:"雖然覺得有點受挫，但還是會試著講笑話吸引他的注意，想辦法回到課本。", s:2},{t:"覺得孩子沒禮貌，嚴肅提醒他上課應有的態度，並堅持把原定進度講完。", s:1}], cat:1 },
        { tag: "2. 【韌性陪伴】", q: "一個簡單的數學公式，你換了三種說法孩子還是聽不懂，眼神開始放空。你會......", options: [{t:"覺得這是一個有趣的挑戰，立刻動手畫圖或用食物舉例，嘗試第四種教法。", s:4},{t:"深呼吸，告訴孩子：「沒關係，這本來就很難，我們再慢慢試一次。」", s:3},{t:"雖然很有耐心，但內心開始懷疑自己的教法，語氣也變得有些平板與無奈。", s:2},{t:"內心感到煩躁，認為孩子可能基礎太差，決定直接跳過這題教下一頁。", s:1}], cat:1 },
        { tag: "3. 【動態調整】", q: "原本準備了精彩的簡報，但孩子突然說他今天學校小考壓力很大，完全不想看教材。你會......", options: [{t:"彈性極大，立刻把簡報關掉，改用聊天或畫畫的方式來複習今天的關鍵字。", s:4},{t:"先花 15 分鐘聽他訴苦，等他情緒穩定後，再挑選最簡單的部分教一點點。", s:3},{t:"雖然同意聊天，但心裡一直掛念著進度，會不斷試圖把話題繞回課本內容。", s:2},{t:"告訴孩子：「考完試就過去了，我們還是要照進度走，不然下週會教不完。」", s:1}], cat:1 },
        { tag: "4. 【正向驅動】", q: "孩子雖然作業寫錯很多，但這次他竟然主動上傳了作業，沒有漏掉。你會......", options: [{t:"大力稱讚：「我發現你這週超準時交作業，這是一個很棒的進步喔！」", s:4},{t:"簡單肯定他的努力，接著開始針對寫錯的部分進行訂正與講解。", s:3},{t:"快速帶過稱讚，把重點放在告訴他哪幾題錯了、應該怎麼訂正才對。", s:2},{t:"直接忽略準時交這件事，皺著眉頭說：「怎麼錯這麼多？你有認真寫嗎？」", s:1}], cat:1 },
        { tag: "5. 【備課熱忱】", q: "下週要教「環境保護」，你目前的備課狀態是？", options: [{t:"興奮地找了相關的新聞影片或互動網頁，想讓孩子覺得這門課超好玩。", s:4},{t:"認真把教材讀過兩遍，並思考孩子可能會在哪裡卡住，預先準備解釋方法。", s:3},{t:"覺得官方提供的教材已經夠用了，稍微看過一遍，確保自己講得出來就好。", s:2},{t:"打算上課前 5 分鐘再看，覺得自己程度應付國小/國中內容綽綽有餘。", s:1}], cat:1 },
        { tag: "6. 【數位應用】", q: "計畫推薦使用線上互動白板，但你從來沒用過。你會......", options: [{t:"覺得很有趣，立刻找教學影片自學，並試著把下週的內容做成互動關卡。", s:4},{t:"願意花一點時間研究，只要能讓教學更生動，學點新工具沒問題。", s:3},{t:"覺得有點麻煩，如果計畫沒強制要求，我傾向用最基本的螢幕分享就好。", s:2},{t:"對數位工具感到抗拒，認為教學的重點是內容，不需要這些花俏的包裝。", s:1}], cat:1 },
        { tag: "7. 【極致自律】", q: "期末考週到了，你非常忙碌，但明天就是跟孩子約定上課的日子。你會......", options: [{t:"早在一週前就預留好時間並備完課，絕不因為自己的私事影響孩子。", s:4},{t:"雖然很累，還是會犧牲一點睡眠時間把教材做完，堅持履行承諾。", s:3},{t:"會匆忙準備一下，但教學品質可能明顯下降，心裡覺得這也是沒辦法的事。", s:2},{t:"會跟計畫請假或是臨時取消，認為自己的課業理所當然比學伴計畫重要。", s:1}], cat:2 },
        { tag: "8. 【反思習慣】", q: "結束教學後，你的習慣通常是？", options: [{t:"迫不及待寫下記錄，反思今天哪種教法有效、哪種無效，並記錄孩子的變化。", s:4},{t:"雖然覺得寫記錄有點累，但會認真回想細節，當作是自己跟孩子的成長日記。", s:3},{t:"隨便寫兩句交代一下進度（例如：教完第三單元），當作是完成一項作業。", s:2},{t:"關掉電腦後就完全不想這件事，覺得教完就是解脫，記錄只是形式。", s:1}], cat:2 },
        { tag: "9. 【主動解難】", q: "孩子對你說話很不客氣，甚至有點挑釁，讓你感到有些受傷與無力。你會......", options: [{t:"主動聯繫學伴組長或在社群尋求建議，想知道如何處理這類情緒問題。", s:4},{t:"自己上網查資料或找朋友聊聊，試圖從中找到改善溝通的方法。", s:3},{t:"悶在心裡，心裡雖然難受，但打算下次上課時冷處理，看他會不會好一點。", s:2},{t:"覺得這孩子沒救了，並開始考慮退出計畫，認為這不是我能處理的。", s:1}], cat:3 },
        { tag: "10. 【長程思維】", q: "教了兩個月，孩子的小考成績反而退步了。你會......", options: [{t:"雖然沮喪但能平復，認為陪伴的重點是信任感的建立，成績並非唯一標準。", s:4},{t:"告訴自己改變需要時間，成績起伏很正常，繼續穩定地給予陪伴與支持。", s:3},{t:"開始感到焦慮，覺得自己可能教得很爛，這份自我懷疑開始影響上課氣氛。", s:2},{t:"覺得非常失敗，認為這兩個月都在浪費時間，產生強烈的挫折與無力感。", s:1}], cat:4 },
        { tag: "11. 【價值共鳴】", q: "身邊的朋友問你：「花這麼多時間當大學伴值得嗎？」你的內心 OS 是？", options: [{t:"「超級值得！這不僅是幫助孩子，也是我在學習如何影響另一個生命。」", s:4},{t:"「很有意義啊，雖然有時候會累，但這份責任感讓我覺得很有成就感。」", s:3},{t:"「就當作是刷履歷或累積經驗，反正有空就做，沒空就算了。」", s:2},{t:"「老實說有時候也覺得後悔，早知道拿這時間去打工賺錢還比較實際。」", s:1}], cat:4 }
    ];

    let currentIdx = 0;
    let scores = { c1:0, c2:0, c3:0, c4:0 };

    function startQuiz() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        showQuestion();
    }

    function showQuestion() {
        const area = document.getElementById('question-area');
        const q = questions[currentIdx];
        document.getElementById('progress-bar').style.width = (currentIdx / questions.length) * 100 + '%';
        let opts = [...q.options].sort(() => Math.random() - 0.5);
        area.innerHTML = `
            <div class="question-box active">
                <div class="question-tag">${q.tag}</div>
                <div class="question-text">${q.q}</div>
                <div class="options-list">${opts.map(o => `<button class="option-btn" onclick="next(${o.s}, ${q.cat})">${o.t}</button>`).join('')}</div>
            </div>`;
    }

    function next(s, cat) {
        scores['c' + cat] += s;
        currentIdx++;
        if (currentIdx < questions.length) showQuestion(); else finish();
    }

    function finish() {
        document.getElementById('quiz-content').style.display = 'none';
        const res = document.getElementById('result-container');
        res.style.display = 'block';

        const total = Object.values(scores).reduce((a, b) => a + b, 0);
        const percent = Math.round((total / 44) * 100);
        document.getElementById('final-percent').innerText = percent + '%';

        // 特質百分比計算
        const p1 = Math.round((scores.c1 / 24) * 100);
        const p2 = Math.round((scores.c2 / 8) * 100);
        const p3 = Math.round((scores.c3 / 4) * 100);
        const p4 = Math.round((scores.c4 / 8) * 100);

        setBar('bar1', 'txt1', p1);
        setBar('bar2', 'txt2', p2);
        setBar('bar3', 'txt3', p3);
        setBar('bar4', 'txt4', p4);

        let role;
        if (total >= 38) role = characters.gold;
        else if (total >= 30) role = characters.warm;
        else if (total >= 20) role = characters.potential;
        else role = characters.tourist;

        document.getElementById('role-name').innerText = role.name;
        document.getElementById('final-desc').innerText = role.desc;
        document.getElementById('character-visual').innerHTML = `<img src="${role.img}" class="character-img">`;
    }

    function setBar(id, txtId, val) {
        setTimeout(() => {
            document.getElementById(id).style.width = val + '%';
            document.getElementById(txtId).innerText = val + '%';
        }, 300);
    }
</script>
</body>
</html>
